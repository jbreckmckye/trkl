(function(g,d){"function"===typeof define&&define.amd?define([],d):"object"===typeof module&&module.exports?module.exports=d(require("b")):g.trkl=d()})(this,function(){function g(b){function h(a){-1===e.indexOf(a)&&e.push(a)}function k(a){var c=f;f=a;e.forEach(function(a){a(f,c)})}var f=b,e=[];b=function(a){if(0<arguments.length)k(a);else{var c=d[d.length-1];c&&h(c.subscriber);return f}};b.subscribe=h;b.unsubscribe=function(a){var c=e;a=c.indexOf(a);-1!==a&&c.splice(a,1)};b.history=function(a){a=
	a||10;var c=g([f]);h(function(d){var b;b=c().slice(0);b.push(d);b=b.slice(-a);c(b)});return c};return b}var d=[];g.computed=function(b){function h(){if(-1!==d.indexOf(f))throw Error("Circular computation detected");d.push(f);var e,a;try{a=b()}catch(c){e=c}d.pop();if(e)throw e;k(a)}var k=g(),f={subscriber:h};h();return k};return g});